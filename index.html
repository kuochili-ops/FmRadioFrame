
<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>æ™ºæ…§ç›¸æ¡†æ”¶éŸ³æ©Ÿ</title>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<style>
    body {
        font-family: "Segoe UI", "Helvetica Neue", sans-serif;
        background-color: #0e1117;
        color: white;
        text-align: center;
        margin: 0;
        padding: 10px;
    }
    .frame-container {
        width: 100%;
        max-width: 650px;
        margin: 0 auto 10px auto;
        border: 4px solid #333;
        border-radius: 12px;
        background: #000;
        overflow: hidden;
        position: relative;
        aspect-ratio: 16/9;
        box-shadow: 0 10px 20px rgba(0,0,0,0.5);
    }
    .frame-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
    .weather-badge {
        position: absolute;
        bottom: 15px;
        right: 15px;
        background: rgba(0, 0, 0, 0.6);
        color: #fff;
        padding: 8px 15px;
        border-radius: 8px;
        font-size: 0.9rem;
    }
    .news-ticker-container {
        max-width: 650px;
        margin: 10px auto;
        background-color: #585d68;
        color: #fff;
        padding: 5px 0;
        overflow: hidden;
        white-space: nowrap;
        border-radius: 4px;
    }
    .news-ticker-content {
        display: inline-block;
        padding-left: 100%;
        font-weight: 500;
        font-size: 0.9em;
        animation: marquee 150s linear infinite;
    }
    @keyframes marquee {
        0% { transform: translateX(0%); }
        100% { transform: translateX(-100%); }
    }
    .controls {
        max-width: 650px;
        margin: auto;
    }
    button {
        background-color: #1E90FF;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        margin: 5px;
    }
    audio {
        width: 100%;
        margin-top: 10px;
    }
</style>
</head>
<body>

<h1>ğŸ“» æ™ºæ…§ç›¸æ¡†æ”¶éŸ³æ©Ÿ</h1>

<div class="frame-container" id="frameBox">
    <img id="slideImg" class="frame-img" src="https://picsum.photos/800/450?random=1">
    <div class="weather-badge">
        <div id="wd-city">Taipei</div>
        <div id="wd-temp">--Â°C</div>
        <div id="wd-desc">Loading...</div>
    </div>
</div>

<div class="news-ticker-container">
    <div class="news-ticker-content" id="newsTickerContent">æ–°èè¼‰å…¥ä¸­...</div>
</div>

<div class="controls">
    <span id="stationLabel">ICRT FM100</span>
    <audio id="audioPlayer" controls></audio>
    <div>
        <button onclick="prevStation()">â®ï¸ ä¸Šä¸€é »é“</button>
        <button onclick="nextStation()">â­ï¸ ä¸‹ä¸€é »é“</button>
    </div>
</div>

<script>
// âœ… é›»å°ä¸²æµæ¸…å–®
const stations = [
    { name: "ICRT FM100", url: "https://stream.rcs.revma.com/ypqt40u0x1zuv" },
    { name: "å°åŒ—é›»å°", url: "https://streamak0130.akamaized.net/live0130lh-olzd/_definst_/fm/chunklist.m3u8" },
    { name: "ä¸­å»£æµè¡Œç¶²", url: "https://stream.rcs.revma.com/aw9uqyxy2tzuv" }
];

let currentStationIdx = 0;
let hls = null;
const audioPlayer = document.getElementById("audioPlayer");
const stationLabel = document.getElementById("stationLabel");

// âœ… æ’­æ”¾é›»å°
function playStation(index) {
    const station = stations[index];
    stationLabel.innerText = station.name;
    const url = station.url;
    if (Hls.isSupported() && url.includes('.m3u8')) {
        if (hls) hls.destroy();
        hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(audioPlayer);
        hls.on(Hls.Events.MANIFEST_PARSED, () => audioPlayer.play());
    } else {
        if (hls) { hls.destroy(); hls = null; }
        audioPlayer.src = url;
        audioPlayer.play();
    }
}
function nextStation() {
    currentStationIdx = (currentStationIdx + 1) % stations.length;
    playStation(currentStationIdx);
}
function prevStation() {
    currentStationIdx = (currentStationIdx - 1 + stations.length) % stations.length;
    playStation(currentStationIdx);
}

// âœ… è¼ªæ’­åœ–ç‰‡
setInterval(() => {
    document.getElementById("slideImg").src = `https://picsum.photos/800/450?random=${Math.floor(Math.random()*100)}`;
}, 5000);

// âœ… å³æ™‚æ–°è RSS
async function fetchNews() {
    const response = await fetch('https://api.allorigins.win/raw?url=' + encodeURIComponent('https://news.ltn.com.tw/rss/all.xml'));
    const text = await response.text();
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(text, "text/xml");
    const items = xmlDoc.querySelectorAll('item');
    let headlines = [];
    items.forEach(item => {
        const title = item.querySelector('title')?.textContent;
        if (title && title.length > 5) headlines.push(title);
    });
    document.getElementById("newsTickerContent").innerText = headlines.join(" â­ ");
}
fetchNews();
setInterval(fetchNews, 600000);

// âœ… å¤©æ°£ API
async function fetchWeather() {
    const apiKey = "dacfd5f7b7e6c05162ac1340b88b6cc0"; // æ›¿æ›æˆä½ çš„ API Key
    const city = "Taipei";
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=zh_tw`;
    const response = await fetch(url);
    const data = await response.json();
    document.getElementById("wd-city").innerText = data.name;
    document.getElementById("wd-temp").innerText = Math.round(data.main.temp) + "Â°C";
    document.getElementById("wd-desc").innerText = data.weather[0].description;
}
fetchWeather();

// å•Ÿå‹•ç¬¬ä¸€å€‹é›»å°
playStation(0);
</script>
</body>
</html>
