
<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ç™½å…­æ™ºæ…§ç›¸æ¡†æ”¶éŸ³æ©Ÿ</title>
https://cdn.jsdelivr.net/npm/hls.js@latest</script>
<style>
    body { font-family: "Segoe UI", sans-serif; background-color: #0e1117; color: white; text-align: center; margin: 0; padding: 10px; }
    .frame-container { width: 100%; max-width: 650px; margin: 0 auto; border: 4px solid #333; border-radius: 12px; background: #000; overflow: hidden; aspect-ratio: 16/9; position: relative; }
    .frame-img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .weather-badge { position: absolute; bottom: 15px; right: 15px; background: rgba(0,0,0,0.6); padding: 8px 12px; border-radius: 8px; font-size: 0.9rem; text-align: left; }
    .news-ticker-container { max-width: 650px; margin: 15px auto; background-color: #585d68; color: #fff; padding: 5px 0; overflow: hidden; white-space: nowrap; border-radius: 4px; }
    .news-ticker-content { display: inline-block; padding-left: 100%; font-weight: 500; font-size: 0.9em; animation: marquee 150s linear infinite; }
    @keyframes marquee { 0% { transform: translateX(0%); } 100% { transform: translateX(-100%); } }
    .controls { max-width: 650px; margin: auto; }
    button { background-color: #1E90FF; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 14px; margin: 5px; }
    audio { width: 100%; margin-top: 10px; }
    .upload-section { margin-top: 20px; padding: 10px; border-top: 1px solid #444; }
</style>
</head>
<body>

<h1>ğŸ“» ç™½å…­æ™ºæ…§ç›¸æ¡†æ”¶éŸ³æ©Ÿ</h1>

<!-- ç›¸æ¡†é¡¯ç¤ºå€ -->
<div class="frame-container">
    assets/photo1.jpg
    <div class="weather-badge">
        <div id="wd-city">Taipei</div>
        <div id="wd-temp">--Â°C</div>
        <div id="wd-desc">Loading...</div>
        <div id="wd-time">--/-- --:--</div>
    </div>
</div>

<!-- æ–°èè·‘é¦¬ç‡ˆ -->
<div class="news-ticker-container">
    <div class="news-ticker-content" id="newsTickerContent">æ–°èè¼‰å…¥ä¸­...</div>
</div>

<!-- é›»å°æ’­æ”¾æ§åˆ¶ -->
<div class="controls">
    <span id="stationLabel">ICRT</span>
    <audio id="audioPlayer" controls></audio>
    <div>
        <button onclick="prevStation()">â®ï¸ ä¸Šä¸€é »é“</button>
        <button onclick="nextStation()">â­ï¸ ä¸‹ä¸€é »é“</button>
    </div>
</div>

<!-- ä½¿ç”¨è€…ä¸Šå‚³ç…§ç‰‡åŠŸèƒ½ -->
<div class="upload-section">
    <h3>ğŸ“¸ è‡ªè¡Œé¸æ“‡ç…§ç‰‡æª”æ¡ˆ</h3>
    <input type="file" id="photoInput" accept="image/*" multiple>
</div>

<script>
// âœ… é›»å°ä¸²æµæ¸…å–®
const stations = [
    { name: "ICRT", url: "https://n13.rcs.revma.com/nkdfurztxp3vv?rj-ttl=5&rj-tok=AAABmsT4bvUAqjd6WCHuBZRFQw" },
    { name: "å°åŒ—é›»å°", url: "https://streamak0130.akamaized.net/live0130lh-olzd/_definst_/fm/chunklist.m3u8" },
    { name: "ä¸­å»£æµè¡Œç¶²", url: "https://stream.rcs.revma.com/aw9uqyxy2tzuv" },
    { name: "å¥½äº‹989", url: "https://n13.rcs.revma.com/fkdywbc59duvv?rj-ttl=5&rj-tok=AAABmsUmzjEAUA_XnW2QqGYA1w" },
    { name: "æ¸¯éƒ½983", url: "https://n12.rcs.revma.com/q2m07dc59duvv?rj-ttl=5&rj-tok=AAABmsVEH6gAzFkrUTImPEJ_7w" },
    { name: "ä¸­å»£éŸ³æ¨‚ç¶²", url: "http://n12.rcs.revma.com/ndk05tyy2tzuv?rj-ttl=5&rj-tok=AAABmsT4lG0A7BfBML2R8HqECw" }
];

// âœ… é è¨­ assets åœ–ç‰‡
let images = [
    "assets/photo1.jpg",
    "assets/photo2.jpg",
    "assets/photo3.jpg",
    "assets/photo4.jpg",
    "assets/photo5.jpg"
];
let currentImgIdx = 0;

// âœ… è¼ªæ’­åœ–ç‰‡
setInterval(() => {
    if (images.length > 0) {
        currentImgIdx = (currentImgIdx + 1) % images.length;
        document.getElementById("slideImg").src = images[currentImgIdx];
    }
}, 5000);

// âœ… ä½¿ç”¨è€…ä¸Šå‚³ç…§ç‰‡
document.getElementById("photoInput").addEventListener("change", function(event) {
    const files = event.target.files;
    if (files.length > 0) {
        images = [];
        for (let file of files) {
            const reader = new FileReader();
            reader.onload = function(e) {
                images.push(e.target.result);
            };
            reader.readAsDataURL(file);
        }
    }
});

// âœ… æ’­æ”¾é›»å°
let currentStationIdx = 0;
let hls = null;
const audioPlayer = document.getElementById("audioPlayer");
const stationLabel = document.getElementById("stationLabel");

function playStation(index) {
    const station = stations[index];
    stationLabel.innerText = station.name;
    const url = station.url;
    if (Hls.isSupported() && url.includes('.m3u8')) {
        if (hls) hls.destroy();
        hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(audioPlayer);
        hls.on(Hls.Events.MANIFEST_PARSED, () => audioPlayer.play());
    } else {
        if (hls) { hls.destroy(); hls = null; }
        audioPlayer.src = url;
        audioPlayer.play();
    }
}
function nextStation() {
    currentStationIdx = (currentStationIdx + 1) % stations.length;
    playStation(currentStationIdx);
}
function prevStation() {
    currentStationIdx = (currentStationIdx - 1 + stations.length) % stations.length;
    playStation(currentStationIdx);
}

// âœ… å¤©æ°£ API
async function fetchWeather() {
    const apiKey = "dcd113bba5675965ccf9e60a7e6d06e5"; // æ›¿æ›æˆä½ çš„ API Key
    const city = "Taipei";
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=zh_tw`;
    const response = await fetch(url);
    const data = await response.json();
    document.getElementById("wd-city").innerText = data.name;
    document.getElementById("wd-temp").innerText = Math.round(data.main.temp) + "Â°C";
    document.getElementById("wd-desc").innerText = data.weather[0].description;
}

// âœ… æ™‚é–“æ›´æ–°
function updateClock() {
    const now = new Date();
    const month = String(now.getMonth() + 1).padStart(2, '0');
    const date = String(now.getDate()).padStart(2, '0');
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    document.getElementById("wd-time").innerText = `${month}/${date} ${hours}:${minutes}`;
}
setInterval(updateClock, 1000);

// âœ… æ–°èè·‘é¦¬ç‡ˆ
async function fetchNews() {
    const response = await fetch('https://api.allorigins.win/raw?url=' + encodeURIComponent('https://news.ltn.com.tw/rss/all.xml'));
    const text = await response.text();
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(text, "text/xml");
    const items = xmlDoc.querySelectorAll('item');
    let headlines = [];
    items.forEach(item => {
        const title = item.querySelector('title')?.textContent;
        if (title && title.length > 5) headlines.push(title);
    });
    document.getElementById("newsTickerContent").innerText = headlines.join(" â­ ");
}
fetchNews();
setInterval(fetchNews, 600000);

// å•Ÿå‹•
playStation(0);
fetchWeather();
updateClock();
</script>
</body>
</html>
